{"ast":null,"code":"import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import{useUser}from'../../context/UserContext';import'./Login.css';import{GoogleOAuthProvider,GoogleLogin}from'@react-oauth/google';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const API_BASE_URL=process.env.REACT_APP_API_BASE_URL;const Login=_ref=>{let{asModal=false,onSuccess,onSwitchRegister}=_ref;const[email,setEmail]=useState('');const[password,setPassword]=useState('');const navigate=useNavigate();const{login}=useUser();const submitHandler=async e=>{e.preventDefault();try{await login(email,password);if(onSuccess)onSuccess();else navigate('/');}catch(error){var _error$response,_error$response$data;alert((error===null||error===void 0?void 0:(_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Login failed');}};const clientId='235074436580-tqrft13a5lddfr16sq1qth0quficpu5k.apps.googleusercontent.com';const handleGoogleSuccess=async credentialResponse=>{try{const res=await axios.post(\"\".concat(API_BASE_URL,\"/api/users/google-login\"),{token:credentialResponse.credential});localStorage.setItem('userInfo',JSON.stringify(res.data));if(onSuccess)onSuccess();else navigate('/');}catch(err){var _err$response,_err$response$data;alert((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'Google login failed');}};const LoginForm=()=>/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"login-title\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",className:\"form-input\",placeholder:\"Enter email\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group password\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",className:\"form-input password-input\",placeholder:\"Enter password\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-button\",children:\"Login\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{margin:'16px 0'},children:/*#__PURE__*/_jsx(GoogleLogin,{onSuccess:handleGoogleSuccess,onError:()=>alert('Google Login Failed')})})]});return/*#__PURE__*/_jsx(GoogleOAuthProvider,{clientId:clientId,children:asModal?/*#__PURE__*/_jsxs(\"div\",{children:[LoginForm(),/*#__PURE__*/_jsxs(\"p\",{className:\"register-text\",children:[\"New Customer?\",' ',/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"register-link\",style:{background:'none',border:'none',cursor:'pointer',padding:0},onClick:onSwitchRegister,children:\"Register\"})]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"login-page-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-card\",children:[LoginForm(),/*#__PURE__*/_jsxs(\"p\",{className:\"register-text\",children:[\"New Customer? \",/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"register-link\",children:\"Register\"})]})]})})});};export default Login;","map":{"version":3,"names":["React","useState","Link","useNavigate","useUser","GoogleOAuthProvider","GoogleLogin","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","Login","_ref","asModal","onSuccess","onSwitchRegister","email","setEmail","password","setPassword","navigate","login","submitHandler","e","preventDefault","error","_error$response","_error$response$data","alert","response","data","message","clientId","handleGoogleSuccess","credentialResponse","res","post","concat","token","credential","localStorage","setItem","JSON","stringify","err","_err$response","_err$response$data","LoginForm","children","className","onSubmit","htmlFor","type","id","placeholder","value","onChange","target","required","style","margin","onError","background","border","cursor","padding","onClick","to"],"sources":["/Users/rahmimuaz/Downloads/Evolexx-inventory 3/client/src/pages/Login/Login.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useUser } from '../../context/UserContext';\nimport './Login.css';\nimport { GoogleOAuthProvider, GoogleLogin } from '@react-oauth/google';\nimport axios from 'axios';\n\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\n\nconst Login = ({ asModal = false, onSuccess, onSwitchRegister }) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const navigate = useNavigate();\n  const { login } = useUser();\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n    try {\n      await login(email, password);\n      if (onSuccess) onSuccess();\n      else navigate('/');\n    } catch (error) {\n      alert(error?.response?.data?.message || 'Login failed');\n    }\n  };\n\n  const clientId = '235074436580-tqrft13a5lddfr16sq1qth0quficpu5k.apps.googleusercontent.com';\n\n  const handleGoogleSuccess = async (credentialResponse) => {\n    try {\n      const res = await axios.post(`${API_BASE_URL}/api/users/google-login`, {\n        token: credentialResponse.credential,\n      });\n\n      localStorage.setItem('userInfo', JSON.stringify(res.data));\n      if (onSuccess) onSuccess();\n      else navigate('/');\n    } catch (err) {\n      alert(err?.response?.data?.message || 'Google login failed');\n    }\n  };\n\n  const LoginForm = () => (\n    <>\n      <h2 className=\"login-title\">Login</h2>\n      <form onSubmit={submitHandler}>\n        <div className=\"form-group\">\n          <label htmlFor=\"email\" className=\"form-label\">Email Address</label>\n          <input\n            type=\"email\"\n            id=\"email\"\n            className=\"form-input\"\n            placeholder=\"Enter email\"\n            value={email}\n            onChange={(e) => setEmail(e.target.value)}\n            required\n          />\n        </div>\n        <div className=\"form-group password\">\n          <label htmlFor=\"password\" className=\"form-label\">Password</label>\n          <input\n            type=\"password\"\n            id=\"password\"\n            className=\"form-input password-input\"\n            placeholder=\"Enter password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            required\n          />\n        </div>\n        <button type=\"submit\" className=\"login-button\">Login</button>\n      </form>\n      <div style={{ margin: '16px 0' }}>\n        <GoogleLogin\n          onSuccess={handleGoogleSuccess}\n          onError={() => alert('Google Login Failed')}\n        />\n      </div>\n    </>\n  );\n\n  return (\n    <GoogleOAuthProvider clientId={clientId}>\n      {asModal ? (\n        <div>\n          {LoginForm()}\n          <p className=\"register-text\">\n            New Customer?{' '}\n            <button\n              type=\"button\"\n              className=\"register-link\"\n              style={{ background: 'none', border: 'none', cursor: 'pointer', padding: 0 }}\n              onClick={onSwitchRegister}\n            >\n              Register\n            </button>\n          </p>\n        </div>\n      ) : (\n        <div className=\"login-page-container\">\n          <div className=\"login-card\">\n            {LoginForm()}\n            <p className=\"register-text\">\n              New Customer? <Link to=\"/register\" className=\"register-link\">Register</Link>\n            </p>\n          </div>\n        </div>\n      )}\n    </GoogleOAuthProvider>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}