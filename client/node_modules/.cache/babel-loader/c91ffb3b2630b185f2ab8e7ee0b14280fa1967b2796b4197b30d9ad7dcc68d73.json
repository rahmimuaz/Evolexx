{"ast":null,"code":"import React,{createContext,useState,useContext,useEffect}from'react';import axios from'axios';import{toast}from'react-toastify';import{useUser}from'./UserContext';import{jsx as _jsx}from\"react/jsx-runtime\";const CartContext=/*#__PURE__*/createContext();export const useCart=()=>useContext(CartContext);const API_BASE_URL=process.env.REACT_APP_API_BASE_URL;export const CartProvider=_ref=>{let{children}=_ref;const[cartItems,setCartItems]=useState([]);const{user}=useUser();useEffect(()=>{const fetchCartItems=async()=>{if(!user){setCartItems([]);return;}try{const config={headers:{Authorization:\"Bearer \".concat(user.token)}};const{data}=await axios.get(\"\".concat(API_BASE_URL,\"/api/users/cart\"),config);setCartItems(data);}catch(error){var _error$response,_error$response$data;console.error('Error fetching cart items:',error);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to load cart.');}};fetchCartItems();},[user]);const addToCart=async(product,quantity)=>{if(!user){toast.error('Please log in to add items to cart.');return;}try{const config={headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(user.token)}};const{data}=await axios.post(\"\".concat(API_BASE_URL,\"/api/users/cart\"),{productId:product._id,quantity},config);setCartItems(data);toast.success(\"\".concat(quantity,\" of \").concat(product.name,\" added to cart!\"));}catch(error){var _error$response2,_error$response2$data;console.error('Error adding to cart:',error);toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Failed to add item to cart.');}};const removeFromCart=async productId=>{if(!user){toast.error('Please log in to remove items from cart.');return;}try{const config={headers:{Authorization:\"Bearer \".concat(user.token)}};const{data}=await axios.delete(\"\".concat(API_BASE_URL,\"/api/users/cart/\").concat(productId),config);setCartItems(data);toast.success('Item removed from cart.');}catch(error){var _error$response3,_error$response3$data;console.error('Error removing from cart:',error);toast.error(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||'Failed to remove item from cart.');}};const updateQuantity=async(productId,newQuantity)=>{if(!user){toast.error('Please log in to update cart.');return;}if(newQuantity<=0){removeFromCart(productId);return;}try{const config={headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(user.token)}};const{data}=await axios.put(\"\".concat(API_BASE_URL,\"/api/users/cart\"),{productId,quantity:newQuantity},config);setCartItems(data);toast.success('Cart quantity updated.');}catch(error){var _error$response4,_error$response4$data;console.error('Error updating quantity:',error);toast.error(((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||'Failed to update quantity.');}};const clearCart=async()=>{if(!user){toast.error('Please log in to clear cart.');return;}try{const config={headers:{Authorization:\"Bearer \".concat(user.token)}};await axios.delete(\"\".concat(API_BASE_URL,\"/api/users/cart\"),config);setCartItems([]);toast.success('Cart cleared successfully.');}catch(error){var _error$response5,_error$response5$data;console.error('Error clearing cart:',error);toast.error(((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.message)||'Failed to clear cart.');}};return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cartItems,addToCart,removeFromCart,updateQuantity,clearCart},children:children});};","map":{"version":3,"names":["React","createContext","useState","useContext","useEffect","axios","toast","useUser","jsx","_jsx","CartContext","useCart","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","CartProvider","_ref","children","cartItems","setCartItems","user","fetchCartItems","config","headers","Authorization","concat","token","data","get","error","_error$response","_error$response$data","console","response","message","addToCart","product","quantity","post","productId","_id","success","name","_error$response2","_error$response2$data","removeFromCart","delete","_error$response3","_error$response3$data","updateQuantity","newQuantity","put","_error$response4","_error$response4$data","clearCart","_error$response5","_error$response5$data","Provider","value"],"sources":["/Users/rahmimuaz/Downloads/Evolexx-inventory 3/client/src/context/CartContext.jsx"],"sourcesContent":["import React, { createContext, useState, useContext, useEffect } from 'react';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { useUser } from './UserContext';\n\nconst CartContext = createContext();\nexport const useCart = () => useContext(CartContext);\n\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\n\nexport const CartProvider = ({ children }) => {\n  const [cartItems, setCartItems] = useState([]);\n  const { user } = useUser();\n\n  useEffect(() => {\n    const fetchCartItems = async () => {\n      if (!user) {\n        setCartItems([]);\n        return;\n      }\n\n      try {\n        const config = {\n          headers: {\n            Authorization: `Bearer ${user.token}`,\n          },\n        };\n        const { data } = await axios.get(`${API_BASE_URL}/api/users/cart`, config);\n        setCartItems(data);\n      } catch (error) {\n        console.error('Error fetching cart items:', error);\n        toast.error(error.response?.data?.message || 'Failed to load cart.');\n      }\n    };\n\n    fetchCartItems();\n  }, [user]);\n\n  const addToCart = async (product, quantity) => {\n    if (!user) {\n      toast.error('Please log in to add items to cart.');\n      return;\n    }\n\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${user.token}`,\n        },\n      };\n      const { data } = await axios.post(\n        `${API_BASE_URL}/api/users/cart`,\n        { productId: product._id, quantity },\n        config\n      );\n      setCartItems(data);\n      toast.success(`${quantity} of ${product.name} added to cart!`);\n    } catch (error) {\n      console.error('Error adding to cart:', error);\n      toast.error(error.response?.data?.message || 'Failed to add item to cart.');\n    }\n  };\n\n  const removeFromCart = async (productId) => {\n    if (!user) {\n      toast.error('Please log in to remove items from cart.');\n      return;\n    }\n\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`,\n        },\n      };\n      const { data } = await axios.delete(`${API_BASE_URL}/api/users/cart/${productId}`, config);\n      setCartItems(data);\n      toast.success('Item removed from cart.');\n    } catch (error) {\n      console.error('Error removing from cart:', error);\n      toast.error(error.response?.data?.message || 'Failed to remove item from cart.');\n    }\n  };\n\n  const updateQuantity = async (productId, newQuantity) => {\n    if (!user) {\n      toast.error('Please log in to update cart.');\n      return;\n    }\n\n    if (newQuantity <= 0) {\n      removeFromCart(productId);\n      return;\n    }\n\n    try {\n      const config = {\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${user.token}`,\n        },\n      };\n      const { data } = await axios.put(\n        `${API_BASE_URL}/api/users/cart`,\n        { productId, quantity: newQuantity },\n        config\n      );\n      setCartItems(data);\n      toast.success('Cart quantity updated.');\n    } catch (error) {\n      console.error('Error updating quantity:', error);\n      toast.error(error.response?.data?.message || 'Failed to update quantity.');\n    }\n  };\n\n  const clearCart = async () => {\n    if (!user) {\n      toast.error('Please log in to clear cart.');\n      return;\n    }\n\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${user.token}`,\n        },\n      };\n      await axios.delete(`${API_BASE_URL}/api/users/cart`, config);\n      setCartItems([]);\n      toast.success('Cart cleared successfully.');\n    } catch (error) {\n      console.error('Error clearing cart:', error);\n      toast.error(error.response?.data?.message || 'Failed to clear cart.');\n    }\n  };\n\n  return (\n    <CartContext.Provider\n      value={{ cartItems, addToCart, removeFromCart, updateQuantity, clearCart }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}